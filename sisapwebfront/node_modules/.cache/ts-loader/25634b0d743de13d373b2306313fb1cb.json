{"remainingRequest":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","dependencies":[{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","mtime":1602069218769},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9MYXIvRG9jdW1lbnRzL1dlYlNpc2FwL3Npc2Fwd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovCgovKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXIubW9kZWwnOwpleHBvcnQgdmFyIGxvZ2luID0gewogIHN0YXRlOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLAogICAgZmlsaWFsTmFtZTogbnVsbCwKICAgIHRva2VuOiBudWxsLAogICAgaXNTeXNBZG1pbjogbnVsbCwKICAgIG5hbWVVc2VyOiBudWxsLAogICAgaWRVc2VyOiBudWxsCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNBdXRoZW50aWNhdGVkOwogICAgfSwKICAgIGZpbGlhbE5hbWU6IGZ1bmN0aW9uIGZpbGlhbE5hbWUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmZpbGlhbE5hbWU7CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBpc1N5c0FkbWluOiBmdW5jdGlvbiBpc1N5c0FkbWluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc1N5c0FkbWluOwogICAgfSwKICAgIG5hbWVVc2VyOiBmdW5jdGlvbiBuYW1lVXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmFtZVVzZXI7CiAgICB9LAogICAgaWRVc2VyOiBmdW5jdGlvbiBpZFVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlkVXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0SXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBzZXRJc0F1dGhlbnRpY2F0ZWQoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHZhbHVlOwogICAgfSwKICAgIHNldEF1dGhEYXRhOiBmdW5jdGlvbiBzZXRBdXRoRGF0YShzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gdmFsdWUuaXNBdXRoZW50aWNhdGVkOwogICAgICBzdGF0ZS5maWxpYWxOYW1lID0gdmFsdWUuZmlsaWFsTmFtZTsKICAgICAgc3RhdGUudG9rZW4gPSB2YWx1ZS50b2tlbjsKICAgICAgc3RhdGUuaXNTeXNBZG1pbiA9IHZhbHVlLmlzU3lzQWRtaW47CiAgICAgIHN0YXRlLm5hbWVVc2VyID0gdmFsdWUubmFtZVVzZXI7CiAgICAgIHN0YXRlLmlkVXNlciA9IHZhbHVlLmlkVXNlcjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGRvTG9naW46IGZ1bmN0aW9uIGRvTG9naW4oX3JlZiwgb3B0aW9ucykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHVzZXIsIHJvdXRlQVBJTG9naW4sIHJlc3BvbnNlLCBkZWNvZGVUb2tlbiwgaXNBZG1pbiwgdG9rZW5EYXRhLCBhdXRoRGF0YSwgdG9rZW5FbmNvZGVkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgdXNlciA9IG5ldyBVc2VyKCk7CiAgICAgICAgICAgICAgICB1c2VyLmNvZEZpbGlhbCA9IG9wdGlvbnMuY29kRmlsaWFsOwogICAgICAgICAgICAgICAgdXNlci5sb2dpbiA9IG9wdGlvbnMubG9naW47CiAgICAgICAgICAgICAgICB1c2VyLnNlbmhhID0gb3B0aW9ucy5zZW5oYTsKICAgICAgICAgICAgICAgIHJvdXRlQVBJTG9naW4gPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMLCAiL2FwaS9hdXRoL2xvZ2luIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICB1cmw6IHJvdXRlQVBJTG9naW4sCiAgICAgICAgICAgICAgICAgIGRhdGE6IHVzZXIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgZGVjb2RlVG9rZW4gPSBKU09OLnBhcnNlKGF0b2IocmVzcG9uc2UuZGF0YS50b2tlbi5zcGxpdCgnLicpWzFdKSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZWNvZGVUb2tlbik7CiAgICAgICAgICAgICAgICBpc0FkbWluID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKGRlY29kZVRva2VuLlRpcG9Vc3VhcmlvID09PSAnQWRtaW5pc3RyYWRvcicpIHsKICAgICAgICAgICAgICAgICAgaXNBZG1pbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdG9rZW5EYXRhID0gewogICAgICAgICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIGZpbGlhbE5hbWU6IGRlY29kZVRva2VuLkZpbGlhbCwKICAgICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlLmRhdGEudG9rZW4sCiAgICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvbjogZGVjb2RlVG9rZW4uZXhwLAogICAgICAgICAgICAgICAgICBpc1N5c0FkbWluOiBpc0FkbWluLAogICAgICAgICAgICAgICAgICBuYW1lVXNlcjogcmVzcG9uc2UuZGF0YS51c2VyLm5vbWVVc3VhcmlvLAogICAgICAgICAgICAgICAgICBpZFVzZXI6IHJlc3BvbnNlLmRhdGEudXNlci5jb2RVc3VhcmlvCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYXV0aERhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZmlsaWFsTmFtZTogZGVjb2RlVG9rZW4uRmlsaWFsLAogICAgICAgICAgICAgICAgICB0b2tlbjogcmVzcG9uc2UuZGF0YS50b2tlbiwKICAgICAgICAgICAgICAgICAgaXNTeXNBZG1pbjogaXNBZG1pbiwKICAgICAgICAgICAgICAgICAgbmFtZVVzZXI6IHJlc3BvbnNlLmRhdGEudXNlci5ub21lVXN1YXJpbywKICAgICAgICAgICAgICAgICAgaWRVc2VyOiByZXNwb25zZS5kYXRhLnVzZXIuY29kVXN1YXJpbwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRva2VuRW5jb2RlZCA9IGJ0b2EoSlNPTi5zdHJpbmdpZnkodG9rZW5EYXRhKSk7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW5FbmNvZGVkKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiBjb21taXQoJ3NldEF1dGhEYXRhJywgYXV0aERhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICByZXR1cm4gY29tbWl0KCdzZXRJc0F1dGhlbnRpY2F0ZWQnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport axios from 'axios';\r\nimport User from '../models/user.model';\r\n\r\nexport const login = {\r\n  state :{\r\n    isAuthenticated: false,\r\n    filialName: null,\r\n    token: null,\r\n    isSysAdmin: null,\r\n    nameUser: null,\r\n    idUser: null\r\n  },\r\n  getters: {\r\n    \r\n    isAuthenticated(state) {\r\n      return state.isAuthenticated;\r\n    },\r\n    filialName(state) {\r\n      return state.filialName;\r\n    },\r\n    token(state) {\r\n      return state.token;\r\n    },\r\n    isSysAdmin(state) {\r\n      return state.isSysAdmin;\r\n    },\r\n    nameUser(state) {\r\n      return state.nameUser;\r\n    },\r\n    idUser(state) {\r\n      return state.idUser;\r\n    },\r\n    \r\n  },\r\n  mutations: {\r\n    setIsAuthenticated(state, value) {\r\n      state.isAuthenticated = value;\r\n    },\r\n    setAuthData(state, value) {\r\n      state.isAuthenticated = value.isAuthenticated;\r\n      state.filialName = value.filialName;\r\n      state.token = value.token;\r\n      state.isSysAdmin = value.isSysAdmin;\r\n      state.nameUser = value.nameUser;\r\n      state.idUser = value.idUser;\r\n    },\r\n  },\r\n  actions:{\r\n    async doLogin({ commit }, options){      \r\n      const user = new User();\r\n      user.codFilial = options.codFilial;\r\n      user.login = options.login;\r\n      user.senha = options.senha;\r\n      const routeAPILogin = `${process.env.VUE_APP_API_URL}/api/auth/login`;\r\n      const response = await axios({\r\n        method: 'post',\r\n        url: routeAPILogin,\r\n        data: user\r\n      });\r\n      if (response.status === 200) {\r\n        console.log(response);\r\n        const decodeToken = JSON.parse(atob(response.data.token.split('.')[1]));\r\n        console.log(decodeToken);\r\n        let isAdmin = false;\r\n        if (decodeToken.TipoUsuario === 'Administrador'){\r\n          isAdmin = true;\r\n        }\r\n        const tokenData = {\r\n          isAuthenticated: true,\r\n          filialName: decodeToken.Filial,\r\n          token: response.data.token,\r\n          tokenExpiration: decodeToken.exp,\r\n          isSysAdmin: isAdmin,\r\n          nameUser: response.data.user.nomeUsuario,\r\n          idUser: response.data.user.codUsuario\r\n        };\r\n        const authData = {\r\n          isAuthenticated: true,\r\n          filialName: decodeToken.Filial,\r\n          token: response.data.token,\r\n          isSysAdmin: isAdmin,\r\n          nameUser: response.data.user.nomeUsuario,\r\n          idUser: response.data.user.codUsuario\r\n        };\r\n\r\n        const tokenEncoded = btoa(JSON.stringify(tokenData));\r\n        window.localStorage.setItem('token', tokenEncoded);\r\n        await commit('setAuthData', authData);\r\n        return true;\r\n      } else {\r\n        await commit('setIsAuthenticated', false);\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n};\r\n"],"sourceRoot":""}]}