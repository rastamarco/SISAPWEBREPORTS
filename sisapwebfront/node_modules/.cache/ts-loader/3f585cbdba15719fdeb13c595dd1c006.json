{"remainingRequest":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts","dependencies":[{"path":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts","mtime":1606313903249},{"path":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAnLi4vdmlld3MvSG9tZS52dWUnOwppbXBvcnQgTG9naW4gZnJvbSAnLi4vdmlld3MvTG9naW4udnVlJzsKaW1wb3J0IFJlcG9ydHMgZnJvbSAnLi4vdmlld3MvcmVwb3J0cy9SZXBvcnRzLnZ1ZSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKVnVlLnVzZShWdWVSb3V0ZXIpOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnLycsCiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnQ6IExvZ2luCn0sIHsKICBwYXRoOiAnL0hvbWUnLAogIG5hbWU6ICdIb21lJywKICBjb21wb25lbnQ6IEhvbWUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfQp9LCB7CiAgcGF0aDogJy9yZXBvcnRzJywKICBjb21wb25lbnQ6IFJlcG9ydHMKfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7CgpmdW5jdGlvbiBpc1Rva2VuVmFsaWQoKSB7CiAgdmFyIHRva2VuRW5jb2RlZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICB2YXIgYXV0aCA9IHRva2VuRW5jb2RlZCAhPSBudWxsID8gSlNPTi5wYXJzZShhdG9iKHRva2VuRW5jb2RlZCkpIDogJyc7CiAgcmV0dXJuIHRva2VuRW5jb2RlZCAmJiBtb21lbnQobmV3IERhdGUoKSkuaXNTYW1lT3JCZWZvcmUoYXV0aC5leHApOwp9Cgpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICBpZiAodG8ucGF0aCA9PT0gJy8nKSB7CiAgICBpZiAoaXNUb2tlblZhbGlkKCkpIHsKICAgICAgLy8gVE9ETzogIGJ1c2NhciBhcyBmZWF0dXJlcyBhZG1pbgogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnL0hvbWUnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICByZWRpcmVjdDogdG8uZnVsbFBhdGgKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGg7CiAgfSkgJiYgaXNUb2tlblZhbGlkKCkpIHsKICAgIG5leHQoKTsgLy8gfSBlbHNlIGlmICh0by5wYXRoID09PSAnL2NoYW5nZXBhc3N3b3JkJykgewogICAgLy8gICBuZXh0KCk7CiAgICAvLyB9IGVsc2UgewogIH0gZWxzZSB7CiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICBuZXh0KHsKICAgICAgcGF0aDogJy8nLAogICAgICBxdWVyeTogewogICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICB9CiAgICB9KTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\source\\repos\\sisapWebApi\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts"],"names":[],"mappings":";AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,SAAP,MAAuC,YAAvC;AACA,OAAO,IAAP,MAAiB,mBAAjB;AACA,OAAO,KAAP,MAAkB,oBAAlB;AACA,OAAO,OAAP,MAAoB,8BAApB;AACA,OAAO,MAAP,MAAmB,QAAnB;AAEA,GAAG,CAAC,GAAJ,CAAQ,SAAR;AAEA,IAAM,MAAM,GAAuB,CACjC;AACE,EAAA,IAAI,EAAE,GADR;AAEE,EAAA,IAAI,EAAE,OAFR;AAGE,EAAA,SAAS,EAAE;AAHb,CADiC,EAMjC;AACE,EAAA,IAAI,EAAE,OADR;AAEE,EAAA,IAAI,EAAE,MAFR;AAGE,EAAA,SAAS,EAAE,IAHb;AAIE,EAAA,IAAI,EAAE;AAAE,IAAA,YAAY,EAAE;AAAhB;AAJR,CANiC,EAYjC;AAAE,EAAA,IAAI,EAAE,UAAR;AACE,EAAA,SAAS,EAAE;AADb,CAZiC,CAAnC;AAiBA,IAAM,MAAM,GAAG,IAAI,SAAJ,CAAc;AAC3B,EAAA,IAAI,EAAE,SADqB;AAE3B,EAAA,IAAI,EAAE,OAAO,CAAC,GAAR,CAAY,QAFS;AAG3B,EAAA,MAAM,EAAN;AAH2B,CAAd,CAAf;;AAQA,SAAS,YAAT,GAAqB;AACnB,MAAM,YAAY,GAAQ,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,OAA5B,CAA1B;AACA,MAAM,IAAI,GAAG,YAAY,IAAI,IAAhB,GAAuB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,YAAD,CAAf,CAAvB,GAAwD,EAArE;AACA,SAAO,YAAY,IAAI,MAAM,CAAC,IAAI,IAAJ,EAAD,CAAN,CAAmB,cAAnB,CAAkC,IAAI,CAAC,GAAvC,CAAvB;AACD;;AAED,MAAM,CAAC,UAAP,CAAkB,UAAC,EAAD,EAAK,IAAL,EAAW,IAAX,EAAmB;AACnC,MAAI,EAAE,CAAC,IAAH,KAAY,GAAhB,EAAqB;AACnB,QAAI,YAAY,EAAhB,EAAoB;AAClB;AACA,MAAA,IAAI,CAAC;AACH,QAAA,IAAI,EAAE,OADH;AAEH,QAAA,KAAK,EAAE;AAAE,UAAA,QAAQ,EAAE,EAAE,CAAC;AAAf;AAFJ,OAAD,CAAJ;AAID,KAND,MAMO;AACL,MAAA,IAAI;AACL;AACF,GAVD,MAUO,IAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAA,MAAM;AAAA,WAAI,MAAM,CAAC,IAAP,CAAY,YAAhB;AAAA,GAAtB,KAAuD,YAAY,EAAvE,EAA2E;AAChF,IAAA,IAAI,GAD4E,CAEhF;AACA;AACA;AACD,GALM,MAKA;AACL,IAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,OAA/B;AACA,IAAA,IAAI,CAAC;AACH,MAAA,IAAI,EAAE,GADH;AAEH,MAAA,KAAK,EAAE;AAAE,QAAA,QAAQ,EAAE,EAAE,CAAC;AAAf;AAFJ,KAAD,CAAJ;AAID;AACF,CAvBD;AAyBA,eAAe,MAAf","sourcesContent":["import Vue from 'vue';\nimport VueRouter, { RouteConfig } from 'vue-router';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport Reports from '../views/reports/Reports.vue';\nimport moment from 'moment';\n\nVue.use(VueRouter);\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: '/',\n    name: 'Login',\n    component: Login,\n  },\n  {\n    path: '/Home',\n    name: 'Home',\n    component: Home,\n    meta: { requiresAuth: true }\n  },\n  { path: '/reports', \n    component: Reports \n  }\n];\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\n\n\nfunction isTokenValid(): boolean {\n  const tokenEncoded: any = window.localStorage.getItem('token');\n  const auth = tokenEncoded != null ? JSON.parse(atob(tokenEncoded)) : '';\n  return tokenEncoded && moment(new Date()).isSameOrBefore(auth.exp);\n}\n\nrouter.beforeEach((to, from, next) => {\n  if (to.path === '/') {\n    if (isTokenValid()) {\n      // TODO:  buscar as features admin\n      next({\n        path: '/Home',\n        query: { redirect: to.fullPath }\n      });\n    } else {\n      next();\n    }\n  } else if (to.matched.some(record => record.meta.requiresAuth) && isTokenValid()) {\n    next();\n    // } else if (to.path === '/changepassword') {\n    //   next();\n    // } else {\n  } else {\n    window.localStorage.removeItem('token');\n    next({\n      path: '/',\n      query: { redirect: to.fullPath }\n    });\n  }\n});\n\nexport default router;\n"],"sourceRoot":""}]}