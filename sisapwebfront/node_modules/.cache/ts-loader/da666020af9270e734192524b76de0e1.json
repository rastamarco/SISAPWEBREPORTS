{"remainingRequest":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts","dependencies":[{"path":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts","mtime":1613587983030},{"path":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613587965760},{"path":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\babel-loader\\lib\\index.js","mtime":1613587964762},{"path":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\ts-loader\\index.js","mtime":1613587978150},{"path":"C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js","mtime":1613587968702}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAnLi4vdmlld3MvSG9tZS52dWUnOwppbXBvcnQgTG9naW4gZnJvbSAnLi4vdmlld3MvTG9naW4udnVlJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpWdWUudXNlKFZ1ZVJvdXRlcik7CnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICcvJywKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudDogTG9naW4KfSwgewogIHBhdGg6ICcvUG9ydGFsU0lTQVAnLAogIG5hbWU6ICdQb3J0YWxTSVNBUCcsCiAgY29tcG9uZW50OiBIb21lLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICcvTG9jYWwnLAogIG5hbWU6ICdMb2NhbCcsCiAgY29tcG9uZW50OiBMb2dpbgp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsKCmZ1bmN0aW9uIGlzVG9rZW5WYWxpZCgpIHsKICB2YXIgdG9rZW5FbmNvZGVkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIHZhciBhdXRoID0gdG9rZW5FbmNvZGVkICE9IG51bGwgPyBKU09OLnBhcnNlKGF0b2IodG9rZW5FbmNvZGVkKSkgOiAnJzsKICByZXR1cm4gdG9rZW5FbmNvZGVkICYmIG1vbWVudChuZXcgRGF0ZSgpKS5pc1NhbWVPckJlZm9yZShhdXRoLmV4cCk7Cn0KCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICh0by5wYXRoID09PSAnLycpIHsKICAgIGlmIChpc1Rva2VuVmFsaWQoKSkgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnL1BvcnRhbFNJU0FQJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoCiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgIH0KICB9IGVsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoOwogIH0pICYmIGlzVG9rZW5WYWxpZCgpKSB7CiAgICBuZXh0KCk7CiAgfSBlbHNlIHsKICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIG5leHQoewogICAgICBwYXRoOiAnLycsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoCiAgICAgIH0KICAgIH0pOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Desktop\\SISAP Web Reports\\SISAPWEBREPORTS\\sisapwebfront\\src\\router\\index.ts"],"names":[],"mappings":";AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,SAAP,MAAuC,YAAvC;AACA,OAAO,IAAP,MAAiB,mBAAjB;AACA,OAAO,KAAP,MAAkB,oBAAlB;AACA,OAAO,MAAP,MAAmB,QAAnB;AAEA,GAAG,CAAC,GAAJ,CAAQ,SAAR;AAEA,IAAM,MAAM,GAAuB,CACjC;AACE,EAAA,IAAI,EAAE,GADR;AAEE,EAAA,IAAI,EAAE,OAFR;AAGE,EAAA,SAAS,EAAE;AAHb,CADiC,EAMjC;AACE,EAAA,IAAI,EAAE,cADR;AAEE,EAAA,IAAI,EAAE,aAFR;AAGE,EAAA,SAAS,EAAE,IAHb;AAIE,EAAA,IAAI,EAAE;AAAE,IAAA,YAAY,EAAE;AAAhB;AAJR,CANiC,EAYjC;AAAE,EAAA,IAAI,EAAE,QAAR;AACE,EAAA,IAAI,EAAE,OADR;AAEE,EAAA,SAAS,EAAE;AAFb,CAZiC,CAAnC;AAkBA,IAAM,MAAM,GAAG,IAAI,SAAJ,CAAc;AAC3B,EAAA,IAAI,EAAE,SADqB;AAE3B,EAAA,IAAI,EAAE,OAAO,CAAC,GAAR,CAAY,QAFS;AAG3B,EAAA,MAAM,EAAN;AAH2B,CAAd,CAAf;;AAOA,SAAS,YAAT,GAAqB;AACnB,MAAM,YAAY,GAAQ,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,OAA5B,CAA1B;AACA,MAAM,IAAI,GAAG,YAAY,IAAI,IAAhB,GAAuB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,YAAD,CAAf,CAAvB,GAAwD,EAArE;AACA,SAAO,YAAY,IAAI,MAAM,CAAC,IAAI,IAAJ,EAAD,CAAN,CAAmB,cAAnB,CAAkC,IAAI,CAAC,GAAvC,CAAvB;AACD;;AAED,MAAM,CAAC,UAAP,CAAkB,UAAC,EAAD,EAAK,IAAL,EAAW,IAAX,EAAmB;AACnC,MAAI,EAAE,CAAC,IAAH,KAAY,GAAhB,EAAqB;AACnB,QAAI,YAAY,EAAhB,EAAoB;AAClB,MAAA,IAAI,CAAC;AACH,QAAA,IAAI,EAAE,cADH;AAEH,QAAA,KAAK,EAAE;AAAE,UAAA,QAAQ,EAAE,EAAE,CAAC;AAAf;AAFJ,OAAD,CAAJ;AAID,KALD,MAKO;AACL,MAAA,IAAI;AACL;AACF,GATD,MASO,IAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAA,MAAM;AAAA,WAAI,MAAM,CAAC,IAAP,CAAY,YAAhB;AAAA,GAAtB,KAAuD,YAAY,EAAvE,EAA2E;AAChF,IAAA,IAAI;AACL,GAFM,MAEA;AACL,IAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,OAA/B;AACA,IAAA,IAAI,CAAC;AACH,MAAA,IAAI,EAAE,GADH;AAEH,MAAA,KAAK,EAAE;AAAE,QAAA,QAAQ,EAAE,EAAE,CAAC;AAAf;AAFJ,KAAD,CAAJ;AAID;AACF,CAnBD;AAqBA,eAAe,MAAf","sourcesContent":["import Vue from 'vue';\r\nimport VueRouter, { RouteConfig } from 'vue-router';\r\nimport Home from '../views/Home.vue';\r\nimport Login from '../views/Login.vue';\r\nimport moment from 'moment';\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes: Array<RouteConfig> = [\r\n  {\r\n    path: '/',\r\n    name: 'Login',\r\n    component: Login,\r\n  },\r\n  {\r\n    path: '/PortalSISAP',\r\n    name: 'PortalSISAP',\r\n    component: Home,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  { path: '/Local',\r\n    name: 'Local', \r\n    component: Login \r\n  }\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n});\r\n\r\n\r\nfunction isTokenValid(): boolean {\r\n  const tokenEncoded: any = window.localStorage.getItem('token');\r\n  const auth = tokenEncoded != null ? JSON.parse(atob(tokenEncoded)) : '';\r\n  return tokenEncoded && moment(new Date()).isSameOrBefore(auth.exp);\r\n}\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.path === '/') {\r\n    if (isTokenValid()) {\r\n      next({\r\n        path: '/PortalSISAP',\r\n        query: { redirect: to.fullPath }\r\n      });\r\n    } else {\r\n      next();\r\n    }\r\n  } else if (to.matched.some(record => record.meta.requiresAuth) && isTokenValid()) {\r\n    next();\r\n  } else {\r\n    window.localStorage.removeItem('token');\r\n    next({\r\n      path: '/',\r\n      query: { redirect: to.fullPath }\r\n    });\r\n  }\r\n});\r\n\r\nexport default router;\r\n"],"sourceRoot":""}]}