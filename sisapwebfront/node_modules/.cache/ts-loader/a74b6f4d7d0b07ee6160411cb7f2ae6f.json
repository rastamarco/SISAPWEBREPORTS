{"remainingRequest":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","dependencies":[{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","mtime":1602006242905},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9MYXIvRG9jdW1lbnRzL1dlYlNpc2FwL3Npc2Fwd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8qIGVzbGludC1kaXNhYmxlICBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCB2YXIgbG9naW4gPSB7CiAgc3RhdGU6IHt9LAogIGdldHRlcnM6IHsKICAgIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7CiAgICB9LAogICAgaWRJbnN0aXR1dGlvbkxvZ2dlZDogZnVuY3Rpb24gaWRJbnN0aXR1dGlvbkxvZ2dlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaWRJbnN0aXR1dGlvbkxvZ2dlZDsKICAgIH0sCiAgICBuYW1lSW5zdGl0dXRpb25Mb2dnZWQ6IGZ1bmN0aW9uIG5hbWVJbnN0aXR1dGlvbkxvZ2dlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmFtZUluc3RpdHV0aW9uTG9nZ2VkOwogICAgfSwKICAgIG5hbWVVc2VyTG9nZ2VkOiBmdW5jdGlvbiBuYW1lVXNlckxvZ2dlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmFtZVVzZXJMb2dnZWQ7CiAgICB9LAogICAgaWRVc2VyOiBmdW5jdGlvbiBpZFVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlkVXNlcjsKICAgIH0sCiAgICBpc0luc3RpdHV0aW9uQWRtaW46IGZ1bmN0aW9uIGlzSW5zdGl0dXRpb25BZG1pbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNJbnN0aXR1dGlvbkFkbWluOwogICAgfSwKICAgIGlzVXNlclN5c0FkbWluOiBmdW5jdGlvbiBpc1VzZXJTeXNBZG1pbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNVc2VyU3lzQWRtaW47CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldElzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gc2V0SXNBdXRoZW50aWNhdGVkKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPSB2YWx1ZTsKICAgIH0sCiAgICBzZXRBdXRoRGF0YTogZnVuY3Rpb24gc2V0QXV0aERhdGEoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLm5hbWVJbnN0aXR1dGlvbkxvZ2dlZCA9IHZhbHVlLm5hbWVJbnN0aXR1dGlvbjsKICAgICAgc3RhdGUubmFtZVVzZXJMb2dnZWQgPSB2YWx1ZS5uYW1lVXNlcjsKICAgICAgc3RhdGUuaWRJbnN0aXR1dGlvbkxvZ2dlZCA9IHZhbHVlLmlkSW5zdGl0dXRpb247CiAgICAgIHN0YXRlLmlzVXNlclN5c0FkbWluID0gdmFsdWUuaXNTeXNBZG1pbjsKICAgICAgc3RhdGUuaWRVc2VyID0gdmFsdWUuaWRVc2VyOwogICAgICBzdGF0ZS5pc0luc3RpdHV0aW9uQWRtaW4gPSB2YWx1ZS5pc0luc3RpdHV0aW9uQWRtaW47CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBtYWtlTG9naW46IGZ1bmN0aW9uIG1ha2VMb2dpbihfcmVmLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgcm91dGVBUElMb2dpbiwgcmVzcG9uc2UsIGRlY29kZVRva2VuLCB0b2tlbkRhdGEsIGF1dGhEYXRhLCB0b2tlbkVuY29kZWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICByb3V0ZUFQSUxvZ2luID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHJvdXRlQVBJTG9naW4sIG9wdGlvbnMpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVjb2RlVG9rZW4gPSBKU09OLnBhcnNlKGF0b2IocmVzcG9uc2UuZGF0YS5Ub2tlbi5BY2Nlc3NUb2tlbi5zcGxpdCgnLicpWzFdKSk7CiAgICAgICAgICAgICAgICB0b2tlbkRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgaXNJbnN0aXR1dGlvbkFkbWluOiBkZWNvZGVUb2tlbi5Jc0luc3RpdHV0aW9uQWRtaW4sCiAgICAgICAgICAgICAgICAgIHRva2VuOiByZXNwb25zZS5kYXRhLlRva2VuLkFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgICB0b2tlbkV4cGlyYXRpb246IHJlc3BvbnNlLmRhdGEuVG9rZW4uRXhwaXJhdGlvbiwKICAgICAgICAgICAgICAgICAgaXNTeXNBZG1pbjogZGVjb2RlVG9rZW4uSXNTeXNBZG1pbiwKICAgICAgICAgICAgICAgICAgaWRJbnN0aXR1dGlvbjogZGVjb2RlVG9rZW4uSWRJbnN0aXR1dGlvbiwKICAgICAgICAgICAgICAgICAgbmFtZUluc3RpdHV0aW9uOiByZXNwb25zZS5kYXRhLkluc3RpdHV0aW9uLAogICAgICAgICAgICAgICAgICBuYW1lVXNlcjogcmVzcG9uc2UuZGF0YS5OYW1lLAogICAgICAgICAgICAgICAgICBpZFVzZXI6IHJlc3BvbnNlLmRhdGEuSWQsCiAgICAgICAgICAgICAgICAgIEVBZG1pbkZlYXR1cmVzOiByZXNwb25zZS5kYXRhLkNsYWltcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGF1dGhEYXRhID0gewogICAgICAgICAgICAgICAgICBpc1N5c0FkbWluOiBkZWNvZGVUb2tlbi5Jc1N5c0FkbWluLAogICAgICAgICAgICAgICAgICBpZEluc3RpdHV0aW9uOiBkZWNvZGVUb2tlbi5JZEluc3RpdHV0aW9uLAogICAgICAgICAgICAgICAgICBuYW1lSW5zdGl0dXRpb246IHJlc3BvbnNlLmRhdGEuSW5zdGl0dXRpb24sCiAgICAgICAgICAgICAgICAgIG5hbWVVc2VyOiBkZWNvZGVUb2tlbi5Vc2VybmFtZSwKICAgICAgICAgICAgICAgICAgaWRVc2VyOiBkZWNvZGVUb2tlbi5pZFVzZXIsCiAgICAgICAgICAgICAgICAgIGlzSW5zdGl0dXRpb25BZG1pbjogZGVjb2RlVG9rZW4uSXNJbnN0aXR1dGlvbkFkbWluCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdG9rZW5FbmNvZGVkID0gYnRvYShKU09OLnN0cmluZ2lmeSh0b2tlbkRhdGEpKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbkVuY29kZWQpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRBdXRoRGF0YScsIGF1dGhEYXRhKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0SXNBdXRoZW50aWNhdGVkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable  @typescript-eslint/no-explicit-any */\r\nimport axios from 'axios';\r\n\r\nexport const login = {\r\n  state :{\r\n        \r\n  },\r\n  getters: {\r\n    \r\n    isAuthenticated(state: any) {\r\n      return state.isAuthenticated;\r\n    },\r\n    idInstitutionLogged(state: any) {\r\n      return state.idInstitutionLogged;\r\n    },\r\n    nameInstitutionLogged(state: any) {\r\n      return state.nameInstitutionLogged;\r\n    },\r\n    nameUserLogged(state: any) {\r\n      return state.nameUserLogged;\r\n    },\r\n    idUser(state: any) {\r\n      return state.idUser;\r\n    },\r\n    isInstitutionAdmin(state: any) {\r\n      return state.isInstitutionAdmin;\r\n    },\r\n    isUserSysAdmin(state: any) {\r\n      return state.isUserSysAdmin;\r\n    },\r\n  },\r\n  mutations: {\r\n    setIsAuthenticated(state: any, value: any) {\r\n      state.isAuthenticated = value;\r\n    },\r\n    setAuthData(state: { nameInstitutionLogged: any; nameUserLogged: any; idInstitutionLogged: any; isUserSysAdmin: any; idUser: any; isInstitutionAdmin: any }, value: { nameInstitution: any; nameUser: any; idInstitution: any; isSysAdmin: any; idUser: any; isInstitutionAdmin: any }) {\r\n      state.nameInstitutionLogged = value.nameInstitution;\r\n      state.nameUserLogged = value.nameUser;\r\n      state.idInstitutionLogged = value.idInstitution;\r\n      state.isUserSysAdmin = value.isSysAdmin;\r\n      state.idUser = value.idUser;\r\n      state.isInstitutionAdmin = value.isInstitutionAdmin;\r\n    },\r\n  },\r\n  actions:{\r\n    async makeLogin({ commit }: any, options: any){\r\n      const routeAPILogin = `${process.env.VUE_APP_API_URL}`;\r\n      const response = await axios.post(routeAPILogin, options);\r\n      if (response.status === 200) {\r\n        const decodeToken = JSON.parse(atob(response.data.Token.AccessToken.split('.')[1]));\r\n        const tokenData = {\r\n          isAuthenticated: true,\r\n          isInstitutionAdmin: decodeToken.IsInstitutionAdmin,\r\n          token: response.data.Token.AccessToken,\r\n          tokenExpiration: response.data.Token.Expiration,\r\n          isSysAdmin: decodeToken.IsSysAdmin,\r\n          idInstitution: decodeToken.IdInstitution,\r\n          nameInstitution: response.data.Institution,\r\n          nameUser: response.data.Name,\r\n          idUser: response.data.Id,\r\n          EAdminFeatures: response.data.Claims\r\n        };\r\n        const authData = {\r\n          isSysAdmin: decodeToken.IsSysAdmin,\r\n          idInstitution: decodeToken.IdInstitution,\r\n          nameInstitution: response.data.Institution,\r\n          nameUser: decodeToken.Username,\r\n          idUser: decodeToken.idUser,\r\n          isInstitutionAdmin: decodeToken.IsInstitutionAdmin\r\n        };\r\n\r\n        const tokenEncoded = btoa(JSON.stringify(tokenData));\r\n        window.localStorage.setItem('token', tokenEncoded);\r\n      \r\n        commit('setAuthData', authData);\r\n        commit('setIsAuthenticated', true);\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n};\r\n"],"sourceRoot":""}]}