{"remainingRequest":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","dependencies":[{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts","mtime":1602002799198},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9MYXIvRG9jdW1lbnRzL1dlYlNpc2FwL3Npc2Fwd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IHZhciBsb2dpbiA9IHsKICBzdGF0ZToge30sCiAgZ2V0dGVyczogewogICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzQXV0aGVudGljYXRlZDsKICAgIH0sCiAgICBpZEluc3RpdHV0aW9uTG9nZ2VkOiBmdW5jdGlvbiBpZEluc3RpdHV0aW9uTG9nZ2VkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pZEluc3RpdHV0aW9uTG9nZ2VkOwogICAgfSwKICAgIG5hbWVJbnN0aXR1dGlvbkxvZ2dlZDogZnVuY3Rpb24gbmFtZUluc3RpdHV0aW9uTG9nZ2VkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5uYW1lSW5zdGl0dXRpb25Mb2dnZWQ7CiAgICB9LAogICAgbmFtZVVzZXJMb2dnZWQ6IGZ1bmN0aW9uIG5hbWVVc2VyTG9nZ2VkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5uYW1lVXNlckxvZ2dlZDsKICAgIH0sCiAgICBpZFVzZXI6IGZ1bmN0aW9uIGlkVXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaWRVc2VyOwogICAgfSwKICAgIGlzSW5zdGl0dXRpb25BZG1pbjogZnVuY3Rpb24gaXNJbnN0aXR1dGlvbkFkbWluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc0luc3RpdHV0aW9uQWRtaW47CiAgICB9LAogICAgaXNVc2VyU3lzQWRtaW46IGZ1bmN0aW9uIGlzVXNlclN5c0FkbWluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc1VzZXJTeXNBZG1pbjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0SXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBzZXRJc0F1dGhlbnRpY2F0ZWQoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHZhbHVlOwogICAgfSwKICAgIHNldEF1dGhEYXRhOiBmdW5jdGlvbiBzZXRBdXRoRGF0YShzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUubmFtZUluc3RpdHV0aW9uTG9nZ2VkID0gdmFsdWUubmFtZUluc3RpdHV0aW9uOwogICAgICBzdGF0ZS5uYW1lVXNlckxvZ2dlZCA9IHZhbHVlLm5hbWVVc2VyOwogICAgICBzdGF0ZS5pZEluc3RpdHV0aW9uTG9nZ2VkID0gdmFsdWUuaWRJbnN0aXR1dGlvbjsKICAgICAgc3RhdGUuaXNVc2VyU3lzQWRtaW4gPSB2YWx1ZS5pc1N5c0FkbWluOwogICAgICBzdGF0ZS5pZFVzZXIgPSB2YWx1ZS5pZFVzZXI7CiAgICAgIHN0YXRlLmlzSW5zdGl0dXRpb25BZG1pbiA9IHZhbHVlLmlzSW5zdGl0dXRpb25BZG1pbjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIG1ha2VMb2dpbjogZnVuY3Rpb24gbWFrZUxvZ2luKF9yZWYsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCByb3V0ZUFQSUxvZ2luLCByZXNwb25zZSwgZGVjb2RlVG9rZW4sIHRva2VuRGF0YSwgYXV0aERhdGEsIHRva2VuRW5jb2RlZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIHJvdXRlQVBJTG9naW4gPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3Qocm91dGVBUElMb2dpbiwgb3B0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWNvZGVUb2tlbiA9IEpTT04ucGFyc2UoYXRvYihyZXNwb25zZS5kYXRhLlRva2VuLkFjY2Vzc1Rva2VuLnNwbGl0KCcuJylbMV0pKTsKICAgICAgICAgICAgICAgIHRva2VuRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBpc0luc3RpdHV0aW9uQWRtaW46IGRlY29kZVRva2VuLklzSW5zdGl0dXRpb25BZG1pbiwKICAgICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlLmRhdGEuVG9rZW4uQWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvbjogcmVzcG9uc2UuZGF0YS5Ub2tlbi5FeHBpcmF0aW9uLAogICAgICAgICAgICAgICAgICBpc1N5c0FkbWluOiBkZWNvZGVUb2tlbi5Jc1N5c0FkbWluLAogICAgICAgICAgICAgICAgICBpZEluc3RpdHV0aW9uOiBkZWNvZGVUb2tlbi5JZEluc3RpdHV0aW9uLAogICAgICAgICAgICAgICAgICBuYW1lSW5zdGl0dXRpb246IHJlc3BvbnNlLmRhdGEuSW5zdGl0dXRpb24sCiAgICAgICAgICAgICAgICAgIG5hbWVVc2VyOiByZXNwb25zZS5kYXRhLk5hbWUsCiAgICAgICAgICAgICAgICAgIGlkVXNlcjogcmVzcG9uc2UuZGF0YS5JZCwKICAgICAgICAgICAgICAgICAgRUFkbWluRmVhdHVyZXM6IHJlc3BvbnNlLmRhdGEuQ2xhaW1zCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYXV0aERhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGlzU3lzQWRtaW46IGRlY29kZVRva2VuLklzU3lzQWRtaW4sCiAgICAgICAgICAgICAgICAgIGlkSW5zdGl0dXRpb246IGRlY29kZVRva2VuLklkSW5zdGl0dXRpb24sCiAgICAgICAgICAgICAgICAgIG5hbWVJbnN0aXR1dGlvbjogcmVzcG9uc2UuZGF0YS5JbnN0aXR1dGlvbiwKICAgICAgICAgICAgICAgICAgbmFtZVVzZXI6IGRlY29kZVRva2VuLlVzZXJuYW1lLAogICAgICAgICAgICAgICAgICBpZFVzZXI6IGRlY29kZVRva2VuLmlkVXNlciwKICAgICAgICAgICAgICAgICAgaXNJbnN0aXR1dGlvbkFkbWluOiBkZWNvZGVUb2tlbi5Jc0luc3RpdHV0aW9uQWRtaW4KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0b2tlbkVuY29kZWQgPSBidG9hKEpTT04uc3RyaW5naWZ5KHRva2VuRGF0YSkpOwogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuRW5jb2RlZCk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEF1dGhEYXRhJywgYXV0aERhdGEpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRJc0F1dGhlbnRpY2F0ZWQnLCB0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lar\\Documents\\WebSisap\\sisapweb\\src\\store\\login.ts"],"names":[],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nexport const login = {\r\n    state :{\r\n        \r\n    },\r\n    getters: {\r\n        isAuthenticated(state: any) {\r\n            return state.isAuthenticated\r\n        },\r\n        idInstitutionLogged(state: any) {\r\n            return state.idInstitutionLogged\r\n        },\r\n        nameInstitutionLogged(state: any) {\r\n            return state.nameInstitutionLogged\r\n        },\r\n        nameUserLogged(state:any) {\r\n            return state.nameUserLogged\r\n        },\r\n        idUser(state:any) {\r\n            return state.idUser\r\n        },\r\n        isInstitutionAdmin(state:any) {\r\n            return state.isInstitutionAdmin\r\n        },\r\n        isUserSysAdmin(state:any) {\r\n            return state.isUserSysAdmin\r\n        },\r\n    },\r\n    mutations: {\r\n        setIsAuthenticated(state: { isAuthenticated: any },value: { isAuthenticated: any }) {\r\n            state.isAuthenticated = value\r\n          },\r\n          setAuthData(state: { nameInstitutionLogged: any; nameUserLogged: any; idInstitutionLogged: any; isUserSysAdmin: any; idUser: any; isInstitutionAdmin: any }, value: { nameInstitution: any; nameUser: any; idInstitution: any; isSysAdmin: any; idUser: any; isInstitutionAdmin: any }) {\r\n            state.nameInstitutionLogged = value.nameInstitution\r\n            state.nameUserLogged = value.nameUser\r\n            state.idInstitutionLogged = value.idInstitution\r\n            state.isUserSysAdmin = value.isSysAdmin\r\n            state.idUser = value.idUser\r\n            state.isInstitutionAdmin = value.isInstitutionAdmin\r\n          },\r\n    },\r\n    actions:{\r\n        async makeLogin({ commit }:any, options: any ){\r\n            let routeAPILogin = `${process.env.VUE_APP_API_URL}`\r\n            let response = await axios.post(routeAPILogin, options)\r\n            if (response.status === 200) {\r\n              let decodeToken = JSON.parse(atob(response.data.Token.AccessToken.split('.')[1]))\r\n              var tokenData = {\r\n                isAuthenticated: true,\r\n                isInstitutionAdmin: decodeToken.IsInstitutionAdmin,\r\n                token: response.data.Token.AccessToken,\r\n                tokenExpiration: response.data.Token.Expiration,\r\n                isSysAdmin: decodeToken.IsSysAdmin,\r\n                idInstitution: decodeToken.IdInstitution,\r\n                nameInstitution: response.data.Institution,\r\n                nameUser: response.data.Name,\r\n                idUser: response.data.Id,\r\n                EAdminFeatures: response.data.Claims\r\n              }\r\n              var authData = {\r\n                isSysAdmin: decodeToken.IsSysAdmin,\r\n                idInstitution: decodeToken.IdInstitution,\r\n                nameInstitution: response.data.Institution,\r\n                nameUser: decodeToken.Username,\r\n                idUser: decodeToken.idUser,\r\n                isInstitutionAdmin: decodeToken.IsInstitutionAdmin\r\n              }\r\n\r\n              var tokenEncoded = btoa(JSON.stringify(tokenData))\r\n              window.localStorage.setItem('token', tokenEncoded)\r\n      \r\n              commit('setAuthData', authData)\r\n              commit('setIsAuthenticated', true)\r\n              return true\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}]}